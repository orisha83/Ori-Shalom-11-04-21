(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(20),a=n.n(r),i=(n(74),n(5)),s=n.n(i),o=n(13),u=n(27),j=n(7),l="/",d="/favorites",h=n(124),p=n(12),b=n(24),f=n(104),O=n(35),x=n.n(O),m=n(23),v="pOuC6c9vNcQd6T7GGA8PjLAZh4bxFxCQ",y="https://dataservice.accuweather.com/",g=function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()("".concat(y,"forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(v,"&metric=",!0));case 3:return n=e.sent,e.abrupt("return",n.data.DailyForecasts);case 7:e.prev=7,e.t0=e.catch(0),m.b.error("Couldn't get forcast weather data: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function w(e){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()("".concat(y,"currentconditions/v1/").concat(t,"?apikey=").concat(v,"&details=true"));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),m.b.error("Couldn't get current weather data: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function A(e,t){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(s.a.mark((function e(t,n){var c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t);case 3:return c=e.sent,e.next=6,w(t);case 6:return r=e.sent,a={fiveDays:c,key:t,name:n,currentWeather:r},e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),m.b.error("Couldn't get weather information: "+e.t0.message);case 14:case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var T=function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){t(e)}))}))};function E(){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,x()("".concat(y,"locations/v1/cities/geoposition/search?apikey=").concat(v,"&q=").concat(t.coords.latitude,",").concat(t.coords.longitude));case 8:return n=e.sent,e.abrupt("return",n.data);case 12:e.prev=12,e.t0=e.catch(0),m.b.error("Couldn't get user position: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function R(e){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()("".concat(y,"locations/v1/cities/autocomplete?apikey=").concat(v,"&q=").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),m.b.error("Couldn't get autocomplete data: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var W=n(123),_=n(129),F=n(40),S=n.n(F),N=n(63),L=n.n(N),V=n(2),M=function(e){var t=Object(p.b)(),n=Object(p.c)((function(e){return e.favoritesReducer})).favorites,r=Object(p.c)((function(e){return e.forcastReducer})),a=r.key,i=r.name,s=Object(c.useState)({}),o=Object(b.a)(s,2),u=o[0],j=o[1],l=n.some((function(t){return t.key==e.keyProp})),d=function(){t(l?{type:"REMOVE_FROM_FAVORITES",payload:u}:{type:"ADD_TO_FAVORITES",payload:u})};return Object(c.useEffect)((function(){j({key:a,name:i})}),[a]),Object(V.jsx)("div",{children:l?Object(V.jsx)(_.a,{color:"inherit",children:Object(V.jsx)(S.a,{style:{fontSize:50},onClick:d})}):Object(V.jsx)(_.a,{color:"inherit",children:Object(V.jsx)(L.a,{style:{fontSize:50},onClick:d})})})},P=Object(W.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(6)}}}})),z=function(e){var t,n,r;console.log("FavoritesItemComp");var a=P(),i=Object(c.useState)(),u=Object(b.a)(i,2),j=u[0],l=u[1];return Object(c.useEffect)((function(){(function(){var t=Object(o.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e.cityData.key);case 2:n=t.sent,l(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(V.jsx)(h.a,{item:!0,xs:3,children:j&&Object(V.jsx)(f.a,{className:a.root,elevation:13,onClick:function(){return e.callbackFunc({key:e.cityData.key,name:e.cityData.name})},children:Object(V.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("h2",{children:e.cityData.name})}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("h3",{children:(null===(t=j[0])||void 0===t?void 0:t.Temperature.Metric.Value.toFixed(0))+"\xb0C"})}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("img",{width:"40",height:"50",src:"https://www.accuweather.com/images/weathericons//".concat(null===(n=j[0])||void 0===n?void 0:n.WeatherIcon,".svg")})}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("h5",{children:null===(r=j[0])||void 0===r?void 0:r.WeatherText})}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)(M,{keyProp:e.cityData.key})})]})})})},H=function(){var e=Object(p.c)((function(e){return e.favoritesReducer})).favorites,t=Object(j.g)(),n=Object(p.b)(),c=function(){var e=Object(o.a)(s.a.mark((function e(c){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(c.key,c.name);case 2:r=e.sent,n({type:"LOAD_WEATHER_DATA",payload:r}),t.push(l);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsx)("div",{children:Object(V.jsx)(h.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2,children:e&&e.map((function(e,t){return Object(V.jsx)(z,{cityData:e,callbackFunc:function(e){return c(e)}},t)}))})})},G=n(125);n(101);var K=function(){var e=Object(p.b)(),t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),u=Object(b.a)(i,2),j=u[0],l=u[1],d=Object(c.useState)(!1),h=Object(b.a)(d,2),f=h[0],O=h[1];Object(c.useEffect)(Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==j){e.next=8;break}return e.next=3,R(j);case 3:t=e.sent,a(t),O(!0),e.next=9;break;case 8:O(!1);case 9:case"end":return e.stop()}}),e)}))),[j]);var x=function(){var t=Object(o.a)(s.a.mark((function t(n){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(r[n].Key,r[n].LocalizedName);case 2:c=t.sent,e({type:"LOAD_WEATHER_DATA",payload:c}),O(!1),l("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(V.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(V.jsx)("input",{value:j,className:"auto-complete-input",type:"text",placeholder:"Search for city...",onChange:function(e){return l(e.target.value)}}),f&&Object(V.jsx)("div",{className:"auto-complete-suggestions",children:Object(V.jsx)("ul",{children:r&&r.map((function(e,t){return Object(V.jsx)("li",{onClick:function(){return x(t)},children:e.LocalizedName},e.Key)}))})})]})},q=Object(W.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(6)}}}})),J=function(){var e=q(),t=Object(p.c)((function(e){return e.forcastReducer})).fiveDays,n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=function(e){var t=new Date(e).getDay();return n[t]};return Object(V.jsx)(h.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2,children:t.map((function(t,n){return Object(V.jsx)(h.a,{item:!0,xs:!0,children:Object(V.jsx)(f.a,{className:e.root,elevation:13,children:Object(V.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("h4",{children:c(t.Date)})}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("h5",{children:t.Day.IconPhrase})}),Object(V.jsxs)(h.a,{item:!0,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2,children:[Object(V.jsx)(h.a,{item:!0,children:Object(V.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(V.jsx)(h.a,{item:!0,children:t.Temperature.Maximum.Value.toFixed(0)+"\xb0C"}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("img",{width:"30",height:"40",src:"https://www.accuweather.com/images/weathericons/".concat(t.Day.Icon,".svg")})})]})}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(V.jsx)(h.a,{item:!0,children:t.Temperature.Minimum.Value.toFixed(0)+"\xb0C"}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)("img",{width:"30",height:"40",src:"https://www.accuweather.com/images/weathericons/".concat(t.Night.Icon,".svg")})})]})})]})]})})},n)}))})},Q=function(){var e,t,n,c=Object(p.c)((function(e){return e.forcastReducer})),r=c.name,a=c.currentWeather,i=c.key;return Object(V.jsx)(G.a,{textAlign:"center",children:Object(V.jsxs)(h.a,{container:!0,direction:"column",alignItems:"center",spacing:5,children:[Object(V.jsx)(h.a,{item:!0,xs:!0,children:Object(V.jsx)(K,{})}),a&&Object(V.jsxs)(h.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",children:[Object(V.jsxs)(h.a,{item:!0,children:[Object(V.jsx)("h2",{children:r}),Object(V.jsx)("h3",{children:(null===(e=a[0])||void 0===e?void 0:e.Temperature.Metric.Value.toFixed(0))+"\xb0C"}),Object(V.jsx)("img",{width:"40",height:"50",src:"https://www.accuweather.com/images/weathericons//".concat(null===(t=a[0])||void 0===t?void 0:t.WeatherIcon,".svg")}),Object(V.jsx)("h3",{children:null===(n=a[0])||void 0===n?void 0:n.WeatherText})]}),Object(V.jsx)(h.a,{item:!0,children:Object(V.jsx)(M,{keyProp:i})})]}),Object(V.jsx)(J,{})]})})},B=n(126),Z=n(127),U=n(128),X=n(64),Y=n.n(X),$=Object(W.a)((function(){return{title:{flexGrow:1}}})),ee=function(){var e=$();return Object(V.jsx)(B.a,{position:"static",children:Object(V.jsxs)(Z.a,{children:[Object(V.jsx)(U.a,{variant:"h6",className:e.title,children:"Weather App"}),Object(V.jsx)(u.b,{to:"/",style:{color:"inherit"},children:Object(V.jsx)(_.a,{color:"inherit",children:Object(V.jsx)(Y.a,{})})}),Object(V.jsx)(u.b,{to:"/favorites",style:{color:"inherit"},children:Object(V.jsx)(_.a,{color:"inherit",children:Object(V.jsx)(S.a,{})})})]})})};var te=function(){var e=Object(p.b)();return Object(c.useEffect)((function(){console.log("useEffect - dispatch"),function(){var t=Object(o.a)(s.a.mark((function t(){var n,c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E();case 3:if(!(n=t.sent)){t.next=11;break}return t.next=7,A(n.Key,n.LocalizedName);case 7:c=t.sent,e({type:"LOAD_WEATHER_DATA",payload:c}),t.next=15;break;case 11:return t.next=13,A(215854,"Tel Aviv");case 13:r=t.sent,e({type:"LOAD_WEATHER_DATA",payload:r});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m.b.error("Can't set initial Location "+t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),Object(V.jsx)(u.a,{children:Object(V.jsxs)("div",{className:"App",children:[Object(V.jsx)(ee,{}),Object(V.jsxs)(j.d,{children:[Object(V.jsx)(j.b,{path:d,component:H}),Object(V.jsx)(j.b,{exact:!0,path:l,component:Q}),Object(V.jsx)(j.a,{to:"/"})]}),Object(V.jsx)(m.a,{})]})})},ne=n(31),ce={fiveDays:[],key:"",name:"",currentWeather:[]},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"LOAD_WEATHER_DATA":return{fiveDays:c.fiveDays,key:c.key,name:c.name,currentWeather:c.currentWeather};default:return e}},ae=n(65),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{favorites:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"ADD_TO_FAVORITES":return{favorites:[].concat(Object(ae.a)(e.favorites),[c])};case"REMOVE_FROM_FAVORITES":return{favorites:e.favorites.filter((function(e){return e.key!==c.key}))};default:return e}},se=Object(ne.b)({forcastReducer:re,favoritesReducer:ie}),oe=Object(ne.c)(se);a.a.render(Object(V.jsx)(p.a,{store:oe,children:Object(V.jsx)(te,{})}),document.getElementById("root"))},74:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.759003e3.chunk.js.map